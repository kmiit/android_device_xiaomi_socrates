attribute vendor_hal_micharge_xiaomi;
attribute vendor_hal_micharge_xiaomi_client;
attribute vendor_hal_micharge_xiaomi_server;

type vendor_hal_micharge_xiaomi_default, domain;
type vendor_hal_micharge_xiaomi_default_exec, exec_type, file_type, vendor_file_type;
type vendor_hal_micharge_xiaomi_hwservice, hwservice_manager_type;

init_daemon_domain(vendor_hal_micharge_xiaomi_default)

hal_server_domain(vendor_hal_micharge_xiaomi_default, vendor_hal_micharge_xiaomi)
vndbinder_use(vendor_hal_micharge_xiaomi)

add_hwservice(vendor_hal_micharge_xiaomi_server, vendor_hal_micharge_xiaomi_hwservice)

allow vendor_hal_micharge_xiaomi_default hidl_base_hwservice:hwservice_manager add;
allow vendor_hal_micharge_xiaomi_default hidl_manager_hwservice:hwservice_manager find;
allow vendor_hal_micharge_xiaomi_default system_server:binder { call transfer };
allow vendor_hal_micharge_xiaomi_default system_app:binder { call transfer };
allow vendor_hal_micharge_xiaomi_default system_app:fd *;
allow vendor_hal_micharge_xiaomi_default system_suspend_hwservice:hwservice_manager find;
allow vendor_hal_micharge_xiaomi_client vendor_hal_micharge_xiaomi_server:binder { call transfer };
allow vendor_hal_micharge_xiaomi_client vendor_hal_micharge_xiaomi_server:fd *;
allow vendor_hal_micharge_xiaomi_client vendor_hal_micharge_xiaomi_hwservice:hwservice_manager find;
allow vendor_hal_micharge_xiaomi_server vendor_hal_micharge_xiaomi_client:binder transfer;

allow vendor_hal_micharge_xiaomi_default rootfs:dir write;
allow vendor_hal_micharge_xiaomi_default self:capability sys_tty_config;
allow vendor_hal_micharge_xiaomi_default self:capability sys_boot;
allow vendor_hal_micharge_xiaomi_default self:capability { chown fsetid };
allow vendor_hal_micharge_xiaomi_default self:netlink_kobject_uevent_socket { bind create read setopt };
allow vendor_hal_micharge_xiaomi_default self:capability2 block_suspend;
allow vendor_hal_micharge_xiaomi_default self:cap2_userns block_suspend;
allow vendor_hal_micharge_xiaomi_default sysfs_wake_lock:file rw_file_perms;

allow vendor_hal_micharge_xiaomi_default mnt_vendor_file:dir search;
allow vendor_hal_micharge_xiaomi_default mnt_vendor_file:dir rw_dir_perms;
allow vendor_hal_micharge_xiaomi_default cgroup:dir r_dir_perms;
allow vendor_hal_micharge_xiaomi_default cgroup:file rw_file_perms;
allow vendor_hal_micharge_xiaomi_default sysfs:dir r_dir_perms;
allow vendor_hal_micharge_xiaomi_default sysfs:file rw_file_perms;
allow vendor_hal_micharge_xiaomi_default sysfs_batteryinfo:dir r_dir_perms;
allow vendor_hal_micharge_xiaomi_default sysfs_batteryinfo:file rw_file_perms;
allow vendor_hal_micharge_xiaomi_default vendor_sysfs_battery_supply:{file lnk_file} r_file_perms;
allow vendor_hal_micharge_xiaomi_default vendor_sysfs_battery_supply:dir r_dir_perms;
allow vendor_hal_micharge_xiaomi_default vendor_sysfs_usb_supply:{file lnk_file} r_file_perms;
allow vendor_hal_micharge_xiaomi_default vendor_sysfs_usb_supply:dir r_dir_perms;
allow vendor_hal_micharge_xiaomi_default vendor_sysfs_usbpd_device:{file lnk_file} r_file_perms;
allow vendor_hal_micharge_xiaomi_default vendor_sysfs_usbpd_device:dir r_dir_perms;

wakelock_use(vendor_hal_micharge_xiaomi_default)
